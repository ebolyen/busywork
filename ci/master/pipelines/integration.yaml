---
resources:
  - name: busywork
    type: git
    source:
      uri: https://github.com/qiime2/busywork
      branch: madmin

  - name: qiime2-source
    type: git
    source:
      uri: https://github.com/nervous-laughter/qiime2
      branch: dev/main

jobs:
  - name: build-qiime2
    plan:
      - get: busywork
      - get: qiime2-source
        trigger: true
      - task: build-qiime2
        file: busywork/ci/master/tasks/build-qiime2.yaml
      - aggregate:
        - task: test-qiime2-linux
          file: busywork/ci/master/tasks/test-qiime2-linux.yaml
        - task: test-qiime2-darwin
          file: busywork/ci/master/tasks/test-qiime2-darwin.yaml
